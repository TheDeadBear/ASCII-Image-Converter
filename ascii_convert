from ascii_magic import AsciiArt
import sys
from pathlib import Path


def main():
    if len(sys.argv) < 2:
        print("Usage: python ascii_convert.py <image_path>")
        return

    image_path = Path(sys.argv[1])

    if not image_path.exists():
        print(f"File not found: {image_path}")
        return

    art = AsciiArt.from_image(image_path)

    # Print to terminal
    art.to_terminal()

    # Also save to file
    output_path = image_path.with_suffix(".txt")
    with open(output_path, "w", encoding="utf-8") as f:
        f.write(art.to_ascii())

    print(f"\nSaved ASCII to {output_path}")


if __name__ == "__main__":
    main()
